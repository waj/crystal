require "../safe_int_spec_helper"

# Ported from https://github.com/dcleblanc/SafeInt/blob/3.23/Test/AddVerify.cpp#L1055-L1359
run_add_tests UInt64, Int64, [
  {0x0000000000000000, 0x0000000000000000, true},
  {0x0000000000000001, 0x0000000000000000, true},
  {0x0000000000000002, 0x0000000000000000, true},
  {0x000000007ffffffe, 0x0000000000000000, true},
  {0x000000007fffffff, 0x0000000000000000, true},
  {0x0000000080000000, 0x0000000000000000, true},
  {0x0000000080000001, 0x0000000000000000, true},
  {0x00000000fffffffe, 0x0000000000000000, true},
  {0x00000000ffffffff, 0x0000000000000000, true},
  {0x0000000100000000, 0x0000000000000000, true},
  {0x0000000200000000, 0x0000000000000000, true},
  {0x7ffffffffffffffe, 0x0000000000000000, true},
  {0x7fffffffffffffff, 0x0000000000000000, true},
  {0x8000000000000000, 0x0000000000000000, true},
  {0x8000000000000001, 0x0000000000000000, true},
  {0xfffffffffffffffe, 0x0000000000000000, true},
  {0xffffffffffffffff, 0x0000000000000000, true},

  {0x0000000000000000, 0x0000000000000001, true},
  {0x0000000000000001, 0x0000000000000001, true},
  {0x0000000000000002, 0x0000000000000001, true},
  {0x000000007ffffffe, 0x0000000000000001, true},
  {0x000000007fffffff, 0x0000000000000001, true},
  {0x0000000080000000, 0x0000000000000001, true},
  {0x0000000080000001, 0x0000000000000001, true},
  {0x00000000fffffffe, 0x0000000000000001, true},
  {0x00000000ffffffff, 0x0000000000000001, true},
  {0x0000000100000000, 0x0000000000000001, true},
  {0x0000000200000000, 0x0000000000000001, true},
  {0x7ffffffffffffffe, 0x0000000000000001, true},
  {0x7fffffffffffffff, 0x0000000000000001, true},
  {0x8000000000000000, 0x0000000000000001, true},
  {0x8000000000000001, 0x0000000000000001, true},
  {0xfffffffffffffffe, 0x0000000000000001, true},
  {0xffffffffffffffff, 0x0000000000000001, false},

  {0x0000000000000000, 0x0000000000000002, true},
  {0x0000000000000001, 0x0000000000000002, true},
  {0x0000000000000002, 0x0000000000000002, true},
  {0x000000007ffffffe, 0x0000000000000002, true},
  {0x000000007fffffff, 0x0000000000000002, true},
  {0x0000000080000000, 0x0000000000000002, true},
  {0x0000000080000001, 0x0000000000000002, true},
  {0x00000000fffffffe, 0x0000000000000002, true},
  {0x00000000ffffffff, 0x0000000000000002, true},
  {0x0000000100000000, 0x0000000000000002, true},
  {0x0000000200000000, 0x0000000000000002, true},
  {0x7ffffffffffffffe, 0x0000000000000002, true},
  {0x7fffffffffffffff, 0x0000000000000002, true},
  {0x8000000000000000, 0x0000000000000002, true},
  {0x8000000000000001, 0x0000000000000002, true},
  {0xfffffffffffffffe, 0x0000000000000002, false},
  {0xffffffffffffffff, 0x0000000000000002, false},

  {0x0000000000000000, 0x000000007ffffffe, true},
  {0x0000000000000001, 0x000000007ffffffe, true},
  {0x0000000000000002, 0x000000007ffffffe, true},
  {0x000000007ffffffe, 0x000000007ffffffe, true},
  {0x000000007fffffff, 0x000000007ffffffe, true},
  {0x0000000080000000, 0x000000007ffffffe, true},
  {0x0000000080000001, 0x000000007ffffffe, true},
  {0x00000000fffffffe, 0x000000007ffffffe, true},
  {0x00000000ffffffff, 0x000000007ffffffe, true},
  {0x0000000100000000, 0x000000007ffffffe, true},
  {0x0000000200000000, 0x000000007ffffffe, true},
  {0x7ffffffffffffffe, 0x000000007ffffffe, true},
  {0x7fffffffffffffff, 0x000000007ffffffe, true},
  {0x8000000000000000, 0x000000007ffffffe, true},
  {0x8000000000000001, 0x000000007ffffffe, true},
  {0xfffffffffffffffe, 0x000000007ffffffe, false},
  {0xffffffffffffffff, 0x000000007ffffffe, false},

  {0x0000000000000000, 0x000000007fffffff, true},
  {0x0000000000000001, 0x000000007fffffff, true},
  {0x0000000000000002, 0x000000007fffffff, true},
  {0x000000007ffffffe, 0x000000007fffffff, true},
  {0x000000007fffffff, 0x000000007fffffff, true},
  {0x0000000080000000, 0x000000007fffffff, true},
  {0x0000000080000001, 0x000000007fffffff, true},
  {0x00000000fffffffe, 0x000000007fffffff, true},
  {0x00000000ffffffff, 0x000000007fffffff, true},
  {0x0000000100000000, 0x000000007fffffff, true},
  {0x0000000200000000, 0x000000007fffffff, true},
  {0x7ffffffffffffffe, 0x000000007fffffff, true},
  {0x7fffffffffffffff, 0x000000007fffffff, true},
  {0x8000000000000000, 0x000000007fffffff, true},
  {0x8000000000000001, 0x000000007fffffff, true},
  {0xfffffffffffffffe, 0x000000007fffffff, false},
  {0xffffffffffffffff, 0x000000007fffffff, false},

  {0x0000000000000000, 0x0000000080000000, true},
  {0x0000000000000001, 0x0000000080000000, true},
  {0x0000000000000002, 0x0000000080000000, true},
  {0x000000007ffffffe, 0x0000000080000000, true},
  {0x000000007fffffff, 0x0000000080000000, true},
  {0x0000000080000000, 0x0000000080000000, true},
  {0x0000000080000001, 0x0000000080000000, true},
  {0x00000000fffffffe, 0x0000000080000000, true},
  {0x00000000ffffffff, 0x0000000080000000, true},
  {0x0000000100000000, 0x0000000080000000, true},
  {0x0000000200000000, 0x0000000080000000, true},
  {0x7ffffffffffffffe, 0x0000000080000000, true},
  {0x7fffffffffffffff, 0x0000000080000000, true},
  {0x8000000000000000, 0x0000000080000000, true},
  {0x8000000000000001, 0x0000000080000000, true},
  {0xfffffffffffffffe, 0x0000000080000000, false},
  {0xffffffffffffffff, 0x0000000080000000, false},

  {0x0000000000000000, 0x0000000080000001, true},
  {0x0000000000000001, 0x0000000080000001, true},
  {0x0000000000000002, 0x0000000080000001, true},
  {0x000000007ffffffe, 0x0000000080000001, true},
  {0x000000007fffffff, 0x0000000080000001, true},
  {0x0000000080000000, 0x0000000080000001, true},
  {0x0000000080000001, 0x0000000080000001, true},
  {0x00000000fffffffe, 0x0000000080000001, true},
  {0x00000000ffffffff, 0x0000000080000001, true},
  {0x0000000100000000, 0x0000000080000001, true},
  {0x0000000200000000, 0x0000000080000001, true},
  {0x7ffffffffffffffe, 0x0000000080000001, true},
  {0x7fffffffffffffff, 0x0000000080000001, true},
  {0x8000000000000000, 0x0000000080000001, true},
  {0x8000000000000001, 0x0000000080000001, true},
  {0xfffffffffffffffe, 0x0000000080000001, false},
  {0xffffffffffffffff, 0x0000000080000001, false},

  {0x0000000000000000, 0x00000000fffffffe, true},
  {0x0000000000000001, 0x00000000fffffffe, true},
  {0x0000000000000002, 0x00000000fffffffe, true},
  {0x000000007ffffffe, 0x00000000fffffffe, true},
  {0x000000007fffffff, 0x00000000fffffffe, true},
  {0x0000000080000000, 0x00000000fffffffe, true},
  {0x0000000080000001, 0x00000000fffffffe, true},
  {0x00000000fffffffe, 0x00000000fffffffe, true},
  {0x00000000ffffffff, 0x00000000fffffffe, true},
  {0x0000000100000000, 0x00000000fffffffe, true},
  {0x0000000200000000, 0x00000000fffffffe, true},
  {0x7ffffffffffffffe, 0x00000000fffffffe, true},
  {0x7fffffffffffffff, 0x00000000fffffffe, true},
  {0x8000000000000000, 0x00000000fffffffe, true},
  {0x8000000000000001, 0x00000000fffffffe, true},
  {0xfffffffffffffffe, 0x00000000fffffffe, false},
  {0xffffffffffffffff, 0x00000000fffffffe, false},

  {0x0000000000000000, 0x00000000ffffffff, true},
  {0x0000000000000001, 0x00000000ffffffff, true},
  {0x0000000000000002, 0x00000000ffffffff, true},
  {0x000000007ffffffe, 0x00000000ffffffff, true},
  {0x000000007fffffff, 0x00000000ffffffff, true},
  {0x0000000080000000, 0x00000000ffffffff, true},
  {0x0000000080000001, 0x00000000ffffffff, true},
  {0x00000000fffffffe, 0x00000000ffffffff, true},
  {0x00000000ffffffff, 0x00000000ffffffff, true},
  {0x0000000100000000, 0x00000000ffffffff, true},
  {0x0000000200000000, 0x00000000ffffffff, true},
  {0x7ffffffffffffffe, 0x00000000ffffffff, true},
  {0x7fffffffffffffff, 0x00000000ffffffff, true},
  {0x8000000000000000, 0x00000000ffffffff, true},
  {0x8000000000000001, 0x00000000ffffffff, true},
  {0xfffffffffffffffe, 0x00000000ffffffff, false},
  {0xffffffffffffffff, 0x00000000ffffffff, false},

  {0x0000000000000000, 0x0000000100000000, true},
  {0x0000000000000001, 0x0000000100000000, true},
  {0x0000000000000002, 0x0000000100000000, true},
  {0x000000007ffffffe, 0x0000000100000000, true},
  {0x000000007fffffff, 0x0000000100000000, true},
  {0x0000000080000000, 0x0000000100000000, true},
  {0x0000000080000001, 0x0000000100000000, true},
  {0x00000000fffffffe, 0x0000000100000000, true},
  {0x00000000ffffffff, 0x0000000100000000, true},
  {0x0000000100000000, 0x0000000100000000, true},
  {0x0000000200000000, 0x0000000100000000, true},
  {0x7ffffffffffffffe, 0x0000000100000000, true},
  {0x7fffffffffffffff, 0x0000000100000000, true},
  {0x8000000000000000, 0x0000000100000000, true},
  {0x8000000000000001, 0x0000000100000000, true},
  {0xfffffffffffffffe, 0x0000000100000000, false},
  {0xffffffffffffffff, 0x0000000100000000, false},

  {0x0000000000000000, 0x0000000200000000, true},
  {0x0000000000000001, 0x0000000200000000, true},
  {0x0000000000000002, 0x0000000200000000, true},
  {0x000000007ffffffe, 0x0000000200000000, true},
  {0x000000007fffffff, 0x0000000200000000, true},
  {0x0000000080000000, 0x0000000200000000, true},
  {0x0000000080000001, 0x0000000200000000, true},
  {0x00000000fffffffe, 0x0000000200000000, true},
  {0x00000000ffffffff, 0x0000000200000000, true},
  {0x0000000100000000, 0x0000000200000000, true},
  {0x0000000200000000, 0x0000000200000000, true},
  {0x7ffffffffffffffe, 0x0000000200000000, true},
  {0x7fffffffffffffff, 0x0000000200000000, true},
  {0x8000000000000000, 0x0000000200000000, true},
  {0x8000000000000001, 0x0000000200000000, true},
  {0xfffffffffffffffe, 0x0000000200000000, false},
  {0xffffffffffffffff, 0x0000000200000000, false},

  {0x0000000000000000, 0x7ffffffffffffffe, true},
  {0x0000000000000001, 0x7ffffffffffffffe, true},
  {0x0000000000000002, 0x7ffffffffffffffe, true},
  {0x000000007ffffffe, 0x7ffffffffffffffe, true},
  {0x000000007fffffff, 0x7ffffffffffffffe, true},
  {0x0000000080000000, 0x7ffffffffffffffe, true},
  {0x0000000080000001, 0x7ffffffffffffffe, true},
  {0x00000000fffffffe, 0x7ffffffffffffffe, true},
  {0x00000000ffffffff, 0x7ffffffffffffffe, true},
  {0x0000000100000000, 0x7ffffffffffffffe, true},
  {0x0000000200000000, 0x7ffffffffffffffe, true},
  {0x7ffffffffffffffe, 0x7ffffffffffffffe, true},
  {0x7fffffffffffffff, 0x7ffffffffffffffe, true},
  {0x8000000000000000, 0x7ffffffffffffffe, true},
  {0x8000000000000001, 0x7ffffffffffffffe, true},
  {0xfffffffffffffffe, 0x7ffffffffffffffe, false},
  {0xffffffffffffffff, 0x7ffffffffffffffe, false},

  {0x0000000000000000, 0x7fffffffffffffff, true},
  {0x0000000000000001, 0x7fffffffffffffff, true},
  {0x0000000000000002, 0x7fffffffffffffff, true},
  {0x000000007ffffffe, 0x7fffffffffffffff, true},
  {0x000000007fffffff, 0x7fffffffffffffff, true},
  {0x0000000080000000, 0x7fffffffffffffff, true},
  {0x0000000080000001, 0x7fffffffffffffff, true},
  {0x00000000fffffffe, 0x7fffffffffffffff, true},
  {0x00000000ffffffff, 0x7fffffffffffffff, true},
  {0x0000000100000000, 0x7fffffffffffffff, true},
  {0x0000000200000000, 0x7fffffffffffffff, true},
  {0x7ffffffffffffffe, 0x7fffffffffffffff, true},
  {0x7fffffffffffffff, 0x7fffffffffffffff, true},
  {0x8000000000000000, 0x7fffffffffffffff, true},
  {0x8000000000000001, 0x7fffffffffffffff, false},
  {0xfffffffffffffffe, 0x7fffffffffffffff, false},
  {0xffffffffffffffff, 0x7fffffffffffffff, false},

  {0x0000000000000000, 0x8000000000000000, false},
  {0x0000000000000001, 0x8000000000000000, false},
  {0x0000000000000002, 0x8000000000000000, false},
  {0x000000007ffffffe, 0x8000000000000000, false},
  {0x000000007fffffff, 0x8000000000000000, false},
  {0x0000000080000000, 0x8000000000000000, false},
  {0x0000000080000001, 0x8000000000000000, false},
  {0x00000000fffffffe, 0x8000000000000000, false},
  {0x00000000ffffffff, 0x8000000000000000, false},
  {0x0000000100000000, 0x8000000000000000, false},
  {0x0000000200000000, 0x8000000000000000, false},
  {0x7ffffffffffffffe, 0x8000000000000000, false},
  {0x7fffffffffffffff, 0x8000000000000000, false},
  {0x8000000000000000, 0x8000000000000000, true},
  {0x8000000000000001, 0x8000000000000000, true},
  {0xfffffffffffffffe, 0x8000000000000000, true},
  {0xffffffffffffffff, 0x8000000000000000, true},

  {0x0000000000000000, 0x8000000000000001, false},
  {0x0000000000000001, 0x8000000000000001, false},
  {0x0000000000000002, 0x8000000000000001, false},
  {0x000000007ffffffe, 0x8000000000000001, false},
  {0x000000007fffffff, 0x8000000000000001, false},
  {0x0000000080000000, 0x8000000000000001, false},
  {0x0000000080000001, 0x8000000000000001, false},
  {0x00000000fffffffe, 0x8000000000000001, false},
  {0x00000000ffffffff, 0x8000000000000001, false},
  {0x0000000100000000, 0x8000000000000001, false},
  {0x0000000200000000, 0x8000000000000001, false},
  {0x7ffffffffffffffe, 0x8000000000000001, false},
  {0x7fffffffffffffff, 0x8000000000000001, true},
  {0x8000000000000000, 0x8000000000000001, true},
  {0x8000000000000001, 0x8000000000000001, true},
  {0xfffffffffffffffe, 0x8000000000000001, true},
  {0xffffffffffffffff, 0x8000000000000001, true},

  {0x0000000000000000, 0xfffffffffffffffe, false},
  {0x0000000000000001, 0xfffffffffffffffe, false},
  {0x0000000000000002, 0xfffffffffffffffe, true},
  {0x000000007ffffffe, 0xfffffffffffffffe, true},
  {0x000000007fffffff, 0xfffffffffffffffe, true},
  {0x0000000080000000, 0xfffffffffffffffe, true},
  {0x0000000080000001, 0xfffffffffffffffe, true},
  {0x00000000fffffffe, 0xfffffffffffffffe, true},
  {0x00000000ffffffff, 0xfffffffffffffffe, true},
  {0x0000000100000000, 0xfffffffffffffffe, true},
  {0x0000000200000000, 0xfffffffffffffffe, true},
  {0x7ffffffffffffffe, 0xfffffffffffffffe, true},
  {0x7fffffffffffffff, 0xfffffffffffffffe, true},
  {0x8000000000000000, 0xfffffffffffffffe, true},
  {0x8000000000000001, 0xfffffffffffffffe, true},
  {0xfffffffffffffffe, 0xfffffffffffffffe, true},
  {0xffffffffffffffff, 0xfffffffffffffffe, true},

  {0x0000000000000000, 0xffffffffffffffff, false},
  {0x0000000000000001, 0xffffffffffffffff, true},
  {0x0000000000000002, 0xffffffffffffffff, true},
  {0x000000007ffffffe, 0xffffffffffffffff, true},
  {0x000000007fffffff, 0xffffffffffffffff, true},
  {0x0000000080000000, 0xffffffffffffffff, true},
  {0x0000000080000001, 0xffffffffffffffff, true},
  {0x00000000fffffffe, 0xffffffffffffffff, true},
  {0x00000000ffffffff, 0xffffffffffffffff, true},
  {0x0000000100000000, 0xffffffffffffffff, true},
  {0x0000000200000000, 0xffffffffffffffff, true},
  {0x7ffffffffffffffe, 0xffffffffffffffff, true},
  {0x7fffffffffffffff, 0xffffffffffffffff, true},
  {0x8000000000000000, 0xffffffffffffffff, true},
  {0x8000000000000001, 0xffffffffffffffff, true},
  {0xfffffffffffffffe, 0xffffffffffffffff, true},
  {0xffffffffffffffff, 0xffffffffffffffff, true},
]
